// Translation System for KLX Digital Website
// Author: GitHub Copilot
// Version: 1.0

class TranslationSystem {
    constructor() {
        this.currentLanguage = 'en';
        this.translations = {
            en: {
                // Navigation
                nav_home: "Home",
                nav_about: "About",
                nav_tokenomics: "Tokenomics",
                nav_contact: "Contact",
                
                // Hero Section
                hero_subtitle: "Tokenized Real World Asset",
                hero_title: "Bridging Gold to the <span class='gold-text'>Digital Economy</span>",
                hero_description: "KLX Digital ($KLX) opens global access to Indonesia's natural wealth, backed by the real book value of Indonesian gold mining.",
                hero_whitepaper: "Read Whitepaper",
                hero_community: "Join Community",
                
                // Launchpad Section
                launchpad_title: "The Future of <span class='gold-text'>Gold Investment</span>",
                launchpad_subtitle: "KLX Digital isn't just a token. It's a transparent, secure, and accessible bridge to one of the world's most stable assets, powered by blockchain technology.",
                
                feature1_title: "Real World Asset (RWA)",
                feature1_desc: "Your investment is directly linked to the tangible value of gold, tokenized for the modern digital economy.",
                
                feature2_title: "Real Backing",
                feature2_desc: "Supported by 5% book value of PT Kristalin Eka Lestari, ensuring your asset has foundational, real-world support.",
                
                feature3_title: "Global Access",
                feature3_desc: "Freely and securely trade your tokenized gold on blockchain markets worldwide, breaking geographical barriers.",
                
                presale_title: "The Presale is Live",
                presale_cta: "Buy with USDT",
                
                // About Section
                about_what: "What is KLX Digital?",
                about_title: "About <span class='gold-text'>KLX Digital</span>",
                about_description: "KLX DIGITAL ($KLX) is a Real World Asset (RWA) token built on Ethereum (ERC-20). It represents 5% of the book value of PT Kristalin Eka Lestari (KEL), a licensed gold mining company in Indonesia. By bridging Indonesian gold into blockchain-based assets, KLX Digital provides global investors with transparent, verifiable, and borderless access to Indonesia's natural wealth.",
                
                detail_issuer: "Issuer:",
                detail_issuer_value: "Kristalin Digital FZ-LLC (UAE)",
                detail_backing: "Backing Entity:",
                detail_backing_value: "PT Kristalin Eka Lestari (Indonesia)",
                detail_supply: "Total Supply:",
                detail_supply_value: "200,000,000 $KLX",
                detail_asset: "Asset Backing:",
                detail_asset_value: "5% book value of Indonesian gold mining",
                
                vision_title: "Vision",
                vision_text: "To become the pioneer of Indonesian gold tokenization recognized globally as a transparent, regulated, and accessible Real World Asset.",
                
                mission_title: "Mission",
                mission1: "Provide secure, transparent, and liquid blockchain-based investment instruments.",
                mission2: "Bridge Indonesia's natural resources to the global digital market.",
                mission3: "Ensure legal and regulatory compliance through structured issuance.",
                mission4: "Promote blockchain adoption in mining and global investment sectors.",
                
                // News Section
                news_title: "KLX in the <span class='gold-text'>Headlines</span>",
                news_subtitle: "See what the world is saying about our journey to tokenize Indonesia's gold.",
                news_readmore: "Read More",
                
                // Legal Structure
                legal_title: "Legal Structure & <span class='gold-text'>Backing</span>",
                legal_subtitle: "How KLX Digital is Structured",
                legal_kel_desc: "Provides 5% book value as asset backing.",
                legal_kristalin_desc: "Issues $KLX on Ethereum.",
                legal_investors_title: "Global Investors",
                legal_investors_desc: "Buy, hold, and trade $KLX on CEX & DEX.",
                legal_market_title: "Global Market",
                legal_market_desc: "Access to Indonesian gold as a tokenized RWA.",
                
                // Why Matters
                why_title: "Why <span class='gold-text'>Matters</span>",
                why_subtitle: "Empowering Indonesia's Gold through Blockchain",
                
                matter1_title: "RWA Real World Asset",
                matter1_desc: "Backed by actual gold mining book value, providing intrinsic value to KLX Token.",
                matter2_title: "Transparency",
                matter2_desc: "Backing agreements & certifications are stored as NFTs directly on-chain.",
                matter3_title: "Global Liquidity",
                matter3_desc: "Easily tradable across decentralized and centralized exchanges worldwide.",
                matter4_title: "Accessibility",
                matter4_desc: "Opening gold investment opportunities to both retail and institutional investors worldwide.",
                matter5_title: "Future-Proof",
                matter5_desc: "Positioned as Indonesia's pioneer in Real World Asset (RWA) tokenization.",
                
                // Roadmap
                roadmap_title: "<span class='gold-text'>Roadmap</span>",
                roadmap_subtitle: "We Translate Your Dream Into Reality",
                
                roadmap_2025: "2025",
                roadmap_2025_1: "Incorporation of Kristalin Digital FZ-LLC",
                roadmap_2025_2: "Smart contract audits & compliance reviews",
                roadmap_2025_3: "Token Generation Event (TGE) for $KLX",
                roadmap_2025_4: "Initial listings on DEX (Uniswap) & regional CEX",
                
                roadmap_2026: "2026",
                roadmap_2026_1: "Strategic partnerships in MENA & Asia",
                roadmap_2026_2: "Tokenized mining certificates as NFTs",
                roadmap_2026_3: "Launch of staking & rewards programs",
                
                roadmap_2027: "2027 â€“ 2028",
                roadmap_2027_1: "Expansion into other Indonesian mining assets (nickel, coal, etc.)",
                roadmap_2027_2: "Listing on Tier-1 global exchanges",
                roadmap_2027_3: "Progress towards a regulated digital commodity exchange",
                
                // Tokenomics
                tokenomics_title: "The <span class='gold-text'>KLX</span> Token",
                tokenomics_subtitle: "The KLX token distribution structure is designed to maintain liquidity, investor incentives, and long-term sustainability.",
                distribution_title: "Token <span class='gold-text'>Distribution</span>",
                
                // Table headers
                table_category: "Category",
                table_tokens: "Tokens (KLX)",
                table_percentage: "Percentage",
                
                // Table data
                category_presale: "Presale & Listing",
                category_liquidity: "Liquidity Pool (DEX & CEX)",
                category_treasury: "Treasury & Reserve",
                category_partnership: "Strategic Partnership",
                category_marketing: "Marketing & Community",
                category_team: "Team & Advisor",
                category_operation: "Operation & Legal Compliance",
                category_staking: "Staking & Reward Pool",
                category_total: "Total",
                
                // Timer labels
                timer_days: "Days",
                timer_hours: "Hours",
                timer_minutes: "Minutes",
                timer_seconds: "Seconds"
            },
            
            id: {
                // Navigation
                nav_home: "Beranda",
                nav_about: "Tentang",
                nav_tokenomics: "Tokenomik",
                nav_contact: "Kontak",
                
                // Hero Section
                hero_subtitle: "Aset Dunia Nyata yang Ditokenisasi",
                hero_title: "Menjembatani Emas ke <span class='gold-text'>Ekonomi Digital</span>",
                hero_description: "KLX Digital ($KLX) membuka akses global ke kekayaan alam Indonesia, didukung oleh nilai buku nyata penambangan emas Indonesia.",
                hero_whitepaper: "Baca Whitepaper",
                hero_community: "Bergabung Komunitas",
                
                // Launchpad Section
                launchpad_title: "Masa Depan <span class='gold-text'>Investasi Emas</span>",
                launchpad_subtitle: "KLX Digital bukan hanya token. Ini adalah jembatan yang transparan, aman, dan mudah diakses ke salah satu aset paling stabil di dunia, didukung oleh teknologi blockchain.",
                
                feature1_title: "Aset Dunia Nyata (RWA)",
                feature1_desc: "Investasi Anda terhubung langsung dengan nilai nyata emas, ditokenisasi untuk ekonomi digital modern.",
                
                feature2_title: "Dukungan Nyata",
                feature2_desc: "Didukung oleh 5% nilai buku PT Kristalin Eka Lestari, memastikan aset Anda memiliki dukungan dunia nyata yang fundamental.",
                
                feature3_title: "Akses Global",
                feature3_desc: "Perdagangkan emas tokenisasi Anda dengan bebas dan aman di pasar blockchain di seluruh dunia, mendobrak hambatan geografis.",
                
                presale_title: "Presale Sedang Berlangsung",
                presale_cta: "Beli dengan USDT",
                
                // About Section
                about_what: "Apa itu KLX Digital?",
                about_title: "Tentang <span class='gold-text'>KLX Digital</span>",
                about_description: "KLX DIGITAL ($KLX) adalah token Real World Asset (RWA) yang dibangun di Ethereum (ERC-20). Ini mewakili 5% dari nilai buku PT Kristalin Eka Lestari (KEL), sebuah perusahaan penambangan emas berlisensi di Indonesia. Dengan menjembatani emas Indonesia ke dalam aset berbasis blockchain, KLX Digital memberikan investor global akses yang transparan, dapat diverifikasi, dan tanpa batas ke kekayaan alam Indonesia.",
                
                detail_issuer: "Penerbit:",
                detail_issuer_value: "Kristalin Digital FZ-LLC (UAE)",
                detail_backing: "Entitas Pendukung:",
                detail_backing_value: "PT Kristalin Eka Lestari (Indonesia)",
                detail_supply: "Total Pasokan:",
                detail_supply_value: "200,000,000 $KLX",
                detail_asset: "Dukungan Aset:",
                detail_asset_value: "5% nilai buku penambangan emas Indonesia",
                
                vision_title: "Visi",
                vision_text: "Menjadi pelopor tokenisasi emas Indonesia yang diakui secara global sebagai Real World Asset yang transparan, teregulasi, dan mudah diakses.",
                
                mission_title: "Misi",
                mission1: "Menyediakan instrumen investasi berbasis blockchain yang aman, transparan, dan likuid.",
                mission2: "Menjembatani sumber daya alam Indonesia ke pasar digital global.",
                mission3: "Memastikan kepatuhan hukum dan regulasi melalui penerbitan yang terstruktur.",
                mission4: "Mempromosikan adopsi blockchain di sektor pertambangan dan investasi global.",
                
                // News Section
                news_title: "KLX di <span class='gold-text'>Berita Utama</span>",
                news_subtitle: "Lihat apa yang dunia katakan tentang perjalanan kami untuk mentokenisasi emas Indonesia.",
                news_readmore: "Baca Selengkapnya",
                
                // Legal Structure
                legal_title: "Struktur Hukum & <span class='gold-text'>Dukungan</span>",
                legal_subtitle: "Bagaimana KLX Digital Terstruktur",
                legal_kel_desc: "Menyediakan 5% nilai buku sebagai dukungan aset.",
                legal_kristalin_desc: "Menerbitkan $KLX di Ethereum.",
                legal_investors_title: "Investor Global",
                legal_investors_desc: "Beli, simpan, dan perdagangkan $KLX di CEX & DEX.",
                legal_market_title: "Pasar Global",
                legal_market_desc: "Akses ke emas Indonesia sebagai RWA yang ditokenisasi.",
                
                // Why Matters
                why_title: "Mengapa <span class='gold-text'>Penting</span>",
                why_subtitle: "Memberdayakan Emas Indonesia melalui Blockchain",
                
                matter1_title: "RWA Aset Dunia Nyata",
                matter1_desc: "Didukung oleh nilai buku penambangan emas aktual, memberikan nilai intrinsik pada Token KLX.",
                matter2_title: "Transparansi",
                matter2_desc: "Perjanjian dukungan & sertifikasi disimpan sebagai NFT langsung di blockchain.",
                matter3_title: "Likuiditas Global",
                matter3_desc: "Mudah diperdagangkan di bursa terdesentralisasi dan terpusat di seluruh dunia.",
                matter4_title: "Aksesibilitas",
                matter4_desc: "Membuka peluang investasi emas untuk investor ritel dan institusional di seluruh dunia.",
                matter5_title: "Siap Masa Depan",
                matter5_desc: "Berposisi sebagai pelopor Indonesia dalam tokenisasi Real World Asset (RWA).",
                
                // Roadmap
                roadmap_title: "<span class='gold-text'>Roadmap</span>",
                roadmap_subtitle: "Kami Mewujudkan Impian Anda Menjadi Kenyataan",
                
                roadmap_2025: "2025",
                roadmap_2025_1: "Pendirian Kristalin Digital FZ-LLC",
                roadmap_2025_2: "Audit smart contract & tinjauan kepatuhan",
                roadmap_2025_3: "Token Generation Event (TGE) untuk $KLX",
                roadmap_2025_4: "Listing awal di DEX (Uniswap) & CEX regional",
                
                roadmap_2026: "2026",
                roadmap_2026_1: "Kemitraan strategis di MENA & Asia",
                roadmap_2026_2: "Sertifikat penambangan yang ditokenisasi sebagai NFT",
                roadmap_2026_3: "Peluncuran program staking & reward",
                
                roadmap_2027: "2027 â€“ 2028",
                roadmap_2027_1: "Ekspansi ke aset penambangan Indonesia lainnya (nikel, batubara, dll.)",
                roadmap_2027_2: "Listing di bursa global Tier-1",
                roadmap_2027_3: "Kemajuan menuju bursa komoditas digital yang teregulasi",
                
                // Tokenomics
                tokenomics_title: "Token <span class='gold-text'>KLX</span>",
                tokenomics_subtitle: "Struktur distribusi token KLX dirancang untuk menjaga likuiditas, insentif investor, dan keberlanjutan jangka panjang.",
                distribution_title: "<span class='gold-text'>Distribusi</span> Token",
                
                // Table headers
                table_category: "Kategori",
                table_tokens: "Token (KLX)",
                table_percentage: "Persentase",
                
                // Table data
                category_presale: "Presale & Listing",
                category_liquidity: "Pool Likuiditas (DEX & CEX)",
                category_treasury: "Perbendaharaan & Cadangan",
                category_partnership: "Kemitraan Strategis",
                category_marketing: "Pemasaran & Komunitas",
                category_team: "Tim & Penasihat",
                category_operation: "Operasi & Kepatuhan Hukum",
                category_staking: "Pool Staking & Reward",
                category_total: "Total",
                
                // Timer labels
                timer_days: "Hari",
                timer_hours: "Jam",
                timer_minutes: "Menit",
                timer_seconds: "Detik"
            }
        };

        this.selectors = {
            // Navigation
            nav_items: 'nav ul li a',
            
            // Hero Section
            hero_subtitle: '.hero-content .subtitle',
            hero_title: '.hero-content h1',
            hero_description: '.hero-content p',
            hero_whitepaper: '.hero-button.primary',
            hero_community: '.hero-button.secondary',
            
            // Launchpad Section
            launchpad_title: '.launchpad-section .section-title',
            launchpad_subtitle: '.launchpad-section .section-subtitle',
            feature_cards: '.feature-card',
            presale_title: '.presale-container h2',
            presale_cta: '.cta-button span',
            
            // About Section
            about_what: '.about-content h3',
            about_title: '.about-content .section-title',
            about_description: '.about-content p',
            token_details: '.token-details li',
            vision_title: '.vision-card h3',
            vision_text: '.vision-card p',
            mission_title: '.mission-card h3',
            mission_items: '.mission-list li span',
            
            // News Section
            news_title: '.news-section .section-title',
            news_subtitle: '.news-section .section-subtitle',
            news_readmore: '.news-card-link',
            
            // Legal Structure
            legal_title: '.legal-structure-section .section-title',
            legal_subtitle: '.legal-structure-section .section-subtitle',
            
            // Why Matters
            why_title: '.why-matters-section .section-title',
            why_subtitle: '.why-matters-section .section-subtitle',
            matter_cards: '.matter-card',
            
            // Roadmap
            roadmap_title: '.roadmap-section .section-title',
            roadmap_subtitle: '.roadmap-section .section-subtitle',
            roadmap_items: '.timeline-item',
            
            // Tokenomics
            tokenomics_title: '.tokenomics-section .section-title',
            tokenomics_subtitle: '.tokenomics-section .section-subtitle',
            distribution_title: '.tokenomics-section h2:last-of-type',
            
            // Timer
            timer_labels: '.timer-segment .label',
            
            // Language selector
            lang_flag: '.language-selector img',
            lang_select: '.language-selector select'
        };

        this.init();
    }

    init() {
        // Load saved language preference or default to English
        this.currentLanguage = localStorage.getItem('klx-language') || 'en';
        
        // Wait for DOM to be fully loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                this.setupEventListeners();
                this.translatePage(this.currentLanguage);
            });
        } else {
            this.setupEventListeners();
            this.translatePage(this.currentLanguage);
        }
    }

    setupEventListeners() {
        const languageSelect = document.querySelector(this.selectors.lang_select);
        if (languageSelect) {
            languageSelect.addEventListener('change', (e) => {
                this.translatePage(e.target.value);
            });
        }
    }

    translatePage(lang) {
        if (!this.translations[lang]) {
            console.warn(`Translation for language '${lang}' not found`);
            return;
        }

        this.currentLanguage = lang;
        const t = this.translations[lang];

        try {
            // Update navigation
            const navItems = document.querySelectorAll(this.selectors.nav_items);
            if (navItems.length >= 4) {
                navItems[0].innerHTML = t.nav_home;
                navItems[1].innerHTML = t.nav_about;
                navItems[2].innerHTML = t.nav_tokenomics;
                navItems[3].innerHTML = t.nav_contact;
            }

            // Update hero section
            this.updateElement(this.selectors.hero_subtitle, t.hero_subtitle);
            this.updateElement(this.selectors.hero_title, t.hero_title);
            this.updateElement(this.selectors.hero_description, t.hero_description);
            this.updateElement(this.selectors.hero_whitepaper, t.hero_whitepaper);
            this.updateElement(this.selectors.hero_community, t.hero_community);

            // Update launchpad section
            this.updateElement(this.selectors.launchpad_title, t.launchpad_title);
            this.updateElement(this.selectors.launchpad_subtitle, t.launchpad_subtitle);

            // Update feature cards
            const featureCards = document.querySelectorAll(this.selectors.feature_cards);
            if (featureCards.length >= 3) {
                this.updateElement(featureCards[0].querySelector('h3'), t.feature1_title);
                this.updateElement(featureCards[0].querySelector('p'), t.feature1_desc);
                this.updateElement(featureCards[1].querySelector('h3'), t.feature2_title);
                this.updateElement(featureCards[1].querySelector('p'), t.feature2_desc);
                this.updateElement(featureCards[2].querySelector('h3'), t.feature3_title);
                this.updateElement(featureCards[2].querySelector('p'), t.feature3_desc);
            }

            // Update presale
            this.updateElement(this.selectors.presale_title, t.presale_title);
            this.updateElement(this.selectors.presale_cta, t.presale_cta);

            // Update about section
            this.updateElement(this.selectors.about_what, t.about_what);
            this.updateElement(this.selectors.about_title, t.about_title);
            this.updateElement(this.selectors.about_description, t.about_description);

            // Update token details
            const tokenDetails = document.querySelectorAll(this.selectors.token_details);
            if (tokenDetails.length >= 4) {
                tokenDetails[0].innerHTML = `<strong>${t.detail_issuer}</strong> <span>${t.detail_issuer_value}</span>`;
                tokenDetails[1].innerHTML = `<strong>${t.detail_backing}</strong> <span>${t.detail_backing_value}</span>`;
                tokenDetails[2].innerHTML = `<strong>${t.detail_supply}</strong> <span>${t.detail_supply_value}</span>`;
                tokenDetails[3].innerHTML = `<strong>${t.detail_asset}</strong> <span>${t.detail_asset_value}</span>`;
            }

            // Update vision/mission
            this.updateElement(this.selectors.vision_title, t.vision_title);
            this.updateElement(this.selectors.vision_text, t.vision_text);
            this.updateElement(this.selectors.mission_title, t.mission_title);

            const missionItems = document.querySelectorAll(this.selectors.mission_items);
            if (missionItems.length >= 4) {
                missionItems[0].innerHTML = t.mission1;
                missionItems[1].innerHTML = t.mission2;
                missionItems[2].innerHTML = t.mission3;
                missionItems[3].innerHTML = t.mission4;
            }

            // Update news section
            this.updateElement(this.selectors.news_title, t.news_title);
            this.updateElement(this.selectors.news_subtitle, t.news_subtitle);

            // Update all "Read More" links
            const readMoreLinks = document.querySelectorAll(this.selectors.news_readmore);
            readMoreLinks.forEach(link => {
                this.updateElement(link, t.news_readmore + ' â†’');
            });

            // Update legal structure
            this.updateElement(this.selectors.legal_title, t.legal_title);
            this.updateElement(this.selectors.legal_subtitle, t.legal_subtitle);

            // Update why matters section
            this.updateElement(this.selectors.why_title, t.why_title);
            this.updateElement(this.selectors.why_subtitle, t.why_subtitle);

            // Update matter cards
            const matterCards = document.querySelectorAll(this.selectors.matter_cards);
            if (matterCards.length >= 5) {
                this.updateElement(matterCards[0].querySelector('h3'), t.matter1_title);
                this.updateElement(matterCards[0].querySelector('p'), t.matter1_desc);
                this.updateElement(matterCards[1].querySelector('h3'), t.matter2_title);
                this.updateElement(matterCards[1].querySelector('p'), t.matter2_desc);
                this.updateElement(matterCards[2].querySelector('h3'), t.matter3_title);
                this.updateElement(matterCards[2].querySelector('p'), t.matter3_desc);
                this.updateElement(matterCards[3].querySelector('h3'), t.matter4_title);
                this.updateElement(matterCards[3].querySelector('p'), t.matter4_desc);
                this.updateElement(matterCards[4].querySelector('h3'), t.matter5_title);
                this.updateElement(matterCards[4].querySelector('p'), t.matter5_desc);
            }

            // Update roadmap section
            this.updateElement(this.selectors.roadmap_title, t.roadmap_title);
            this.updateElement(this.selectors.roadmap_subtitle, t.roadmap_subtitle);

            // Update roadmap items
            const roadmapItems = document.querySelectorAll(this.selectors.roadmap_items);
            if (roadmapItems.length >= 3) {
                // 2025
                this.updateElement(roadmapItems[0].querySelector('h3'), t.roadmap_2025);
                const items2025 = roadmapItems[0].querySelectorAll('li');
                if (items2025.length >= 4) {
                    items2025[0].innerHTML = t.roadmap_2025_1;
                    items2025[1].innerHTML = t.roadmap_2025_2;
                    items2025[2].innerHTML = t.roadmap_2025_3;
                    items2025[3].innerHTML = t.roadmap_2025_4;
                }

                // 2026
                this.updateElement(roadmapItems[1].querySelector('h3'), t.roadmap_2026);
                const items2026 = roadmapItems[1].querySelectorAll('li');
                if (items2026.length >= 3) {
                    items2026[0].innerHTML = t.roadmap_2026_1;
                    items2026[1].innerHTML = t.roadmap_2026_2;
                    items2026[2].innerHTML = t.roadmap_2026_3;
                }

                // 2027-2028
                this.updateElement(roadmapItems[2].querySelector('h3'), t.roadmap_2027);
                const items2027 = roadmapItems[2].querySelectorAll('li');
                if (items2027.length >= 3) {
                    items2027[0].innerHTML = t.roadmap_2027_1;
                    items2027[1].innerHTML = t.roadmap_2027_2;
                    items2027[2].innerHTML = t.roadmap_2027_3;
                }
            }

            // Update tokenomics section
            const tokenomicsTitles = document.querySelectorAll(this.selectors.tokenomics_title);
            if (tokenomicsTitles.length >= 1) {
                this.updateElement(tokenomicsTitles[0], t.tokenomics_title);
            }
            this.updateElement(this.selectors.tokenomics_subtitle, t.tokenomics_subtitle);
            this.updateElement(this.selectors.distribution_title, t.distribution_title);

            // Update table headers
            const tableHeaders = document.querySelectorAll('.token-table th');
            if (tableHeaders.length >= 3) {
                tableHeaders[0].innerHTML = t.table_category;
                tableHeaders[1].innerHTML = t.table_tokens;
                tableHeaders[2].innerHTML = t.table_percentage;
            }

            // Update table data (categories only, keep numbers the same)
            const tableRows = document.querySelectorAll('.token-table tbody tr');
            if (tableRows.length >= 9) {
                tableRows[0].querySelector('td:first-child').innerHTML = t.category_presale;
                tableRows[1].querySelector('td:first-child').innerHTML = t.category_liquidity;
                tableRows[2].querySelector('td:first-child').innerHTML = t.category_treasury;
                tableRows[3].querySelector('td:first-child').innerHTML = t.category_partnership;
                tableRows[4].querySelector('td:first-child').innerHTML = t.category_marketing;
                tableRows[5].querySelector('td:first-child').innerHTML = t.category_team;
                tableRows[6].querySelector('td:first-child').innerHTML = t.category_operation;
                tableRows[7].querySelector('td:first-child').innerHTML = t.category_staking;
                tableRows[8].querySelector('td:first-child').innerHTML = t.category_total;
            }

            // Update timer labels
            const timerLabels = document.querySelectorAll(this.selectors.timer_labels);
            if (timerLabels.length >= 4) {
                timerLabels[0].innerHTML = t.timer_days;
                timerLabels[1].innerHTML = t.timer_hours;
                timerLabels[2].innerHTML = t.timer_minutes;
                timerLabels[3].innerHTML = t.timer_seconds;
            }

            // Update language selector flag
            this.updateLanguageFlag(lang);

            // Save language preference
            localStorage.setItem('klx-language', lang);

            // Update select value
            const languageSelect = document.querySelector(this.selectors.lang_select);
            if (languageSelect) {
                languageSelect.value = lang;
            }

        } catch (error) {
            console.error('Error translating page:', error);
        }
    }

    updateElement(selector, content) {
        const element = typeof selector === 'string' ? document.querySelector(selector) : selector;
        if (element) {
            element.innerHTML = content;
        }
    }

    updateLanguageFlag(lang) {
        const flagImg = document.querySelector(this.selectors.lang_flag);
        if (flagImg) {
            if (lang === 'id') {
                flagImg.src = 'https://flagcdn.com/id.svg';
                flagImg.alt = 'Indonesian Flag';
            } else {
                flagImg.src = 'https://flagcdn.com/gb.svg';
                flagImg.alt = 'English Flag';
            }
        }
    }

    getCurrentLanguage() {
        return this.currentLanguage;
    }

    addTranslation(lang, translations) {
        if (!this.translations[lang]) {
            this.translations[lang] = {};
        }
        Object.assign(this.translations[lang], translations);
    }

    translateText(key, lang = null) {
        const targetLang = lang || this.currentLanguage;
        return this.translations[targetLang] && this.translations[targetLang][key] 
            ? this.translations[targetLang][key] 
            : key;
    }
}

// Initialize translation system
const klxTranslation = new TranslationSystem();

// Export for use in other scripts if needed
if (typeof module !== 'undefined' && module.exports) {
    module.exports = TranslationSystem;
}
